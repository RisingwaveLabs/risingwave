# Before running this test:
#   cd e2e_test/udf/wasm && cargo build --release

statement ok
create function int_42() returns int
language wasm using link 'fs://e2e_test/udf/wasm/target/wasm32-wasi/release/udf.wasm';

statement ok
create function gcd(int, int) returns int
language wasm using link 'fs://e2e_test/udf/wasm/target/wasm32-wasi/release/udf.wasm';

statement ok
create function gcd(int, int, int) returns int
language wasm using link 'fs://e2e_test/udf/wasm/target/wasm32-wasi/release/udf.wasm';

statement ok
create function extract_tcp_info(bytea) returns struct<src_addr varchar, dst_addr varchar, src_port smallint, dst_port smallint>
language wasm using link 'fs://e2e_test/udf/wasm/target/wasm32-wasi/release/udf.wasm';

query I
select int_42();
----
42

query I
select gcd(25, 15);
----
5

query I
select gcd(25, 15, 3);
----
1

query T
select extract_tcp_info(E'\\x45000034a8a8400040065b8ac0a8000ec0a80001035d20b6d971b900000000080020200493310000020405b4' :: bytea);
----
(192.168.0.14,192.168.0.1,861,8374)

statement ok
drop function int_42;

statement ok
drop function gcd(int,int);

statement ok
drop function gcd(int,int,int);

statement ok
drop function extract_tcp_info;

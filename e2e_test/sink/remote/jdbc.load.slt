statement ok
CREATE TABLE t_remote (
    id BIGINT PRIMARY KEY,
    v_varchar VARCHAR,
    v_text TEXT,
    v_integer INTEGER,
    v_smallint SMALLINT,
    v_bigint BIGINT,
    v_decimal DECIMAL,
    v_real REAL,
    v_double DOUBLE PRECISION,
    v_boolean BOOLEAN,
    v_date DATE,
    v_time TIME,
    v_timestamp TIMESTAMP,
    v_jsonb JSONB,
    v_bytea BYTEA
);

statement ok
create materialized view mv_remote as select * from t_remote;

statement ok
CREATE SINK s_postgres FROM mv_remote WITH (
    connector='jdbc',
    jdbc.url='jdbc:postgresql://db:5432/test?user=test&password=connector',
    table.name='t_remote',
    type='upsert'
);

statement ok
CREATE SINK s_mysql FROM mv_remote WITH (
    connector='jdbc',
    jdbc.url='jdbc:mysql://mysql:3306/test?user=mysqluser&password=mysqlpw',
    table.name='t_remote',
    type='upsert'
);

statement ok
INSERT INTO t_remote VALUES
    (1, 'Varchar value 1', 'Text value 1', 123, 456, 789, 12.34, 56.78, 90.12, TRUE, '2023-05-22', '12:34:56', '2023-05-22 12:34:56', '{"key": "value"}', E'\\xDEADBEEF'),
    (2, 'Varchar value 2', 'Text value 2', 234, 567, 890, 23.45, 67.89, 01.23, FALSE, '2023-05-23', '23:45:01', '2023-05-23 23:45:01', '{"key": "value2"}', E'\\xFEEDBEEF'),
    (3, 'Varchar value 3', 'Text value 3', 345, 678, 901, 34.56, 78.90, 12.34, TRUE, '2023-05-24', '12:34:56', '2023-05-24 12:34:56', '{"key": "value3"}', E'\\xCAFEBABE');

statement ok
INSERT INTO t_remote VALUES
    (4, 'Varchar value 4', 'Text value 4', 456, 789, 012, 45.67, 89.01, 23.45, FALSE, '2023-05-25', '23:45:01', '2023-05-25 23:45:01', '{"key": "value4"}', E'\\xBABEC0DE'),
    (5, 'Varchar value 5', 'Text value 5', 567, 890, 123, 56.78, 90.12, 34.56, TRUE, '2023-05-26', '12:34:56', '2023-05-26 12:34:56', '{"key": "value5"}', E'\\xDEADBABE'),
    (6, 'Varchar value 6', 'Text value 6', 789, 123, 456, 67.89, 34.56, 78.91, FALSE, '2023-05-27', '23:45:01', '2023-05-27 23:45:01', '{"key": "value6"}', E'\\xDEADBABE');

statement ok
FLUSH;

statement ok
UPDATE t_remote SET v_varchar = 'Alex' WHERE id = 1;

statement ok
DELETE FROM t_remote WHERE id = 2;

statement ok
FLUSH;

statement ok
DROP SINK s_postgres;

statement ok
DROP SINK s_mysql

statement ok
DROP MATERIALIZED VIEW mv_remote;

statement ok
DROP TABLE t_remote;

statement ok
FLUSH;
